
<ul>
    <li><input type="checkbox" id="select_all"/> Selecct All</li>
    <li><input class="checkbox" type="checkbox" id="checkbox1" value="helo1"> helo1</li>
    <li><input class="checkbox" type="checkbox" id="checkbox2" value="helo2"> helo2</li>
    <li><input class="checkbox" type="checkbox" id="checkbox3" value="helo3"> helo3</li>
    <li><input class="checkbox" type="checkbox" id="checkbox4" value="helo4"> helo4</li>
    <li><input class="checkbox" type="checkbox" id="checkbox5" value="helo5"> helo5</li>
    <li><input class="checkbox" type="checkbox" id="checkbox6" value="helo6"> helo6</li>
</ul>
<button id="btn1">click</button>
<script src="jquery-3.1.0.js"></script>
<script>
var selected= [];
var data = localStorage.getItem("keys");
alert(data);
  $('.checkbox').each(function()
			{
				var val = localStorage[$(this).attr("id")];
				var isChecked = val !== undefined ? val == "true" : false;
				$(this).prop("checked", isChecked);
			});
$("#select_all").change(function(){ 
 
    var status = this.checked;
    $('.checkbox').each(function(){ 
        this.checked = status; 
    });
});

$('.checkbox').change(function(){ 
  localStorage[$(this).attr("id")] = this.checked;
if(this.checked == false){ 
        $("#select_all")[0].checked = false; 
    }
 if ($('.checkbox:checked').length == $('.checkbox').length ){ 
        $("#select_all")[0].checked = true; 
    }
	
});
$('#btn1').click(function(){
 $('.checkbox:checked').each(function() {
       selected.push($(this).val());
	   }); 
localStorage.setItem("keys", selected);
});
</script>